/* Shipment status coloring */
.eao-shipment-qty.eao-ship-delivered{background:#e6f8ea;color:#217a00;border-radius:3px;padding:2px 4px;display:inline-block;min-width:22px;text-align:center}
.eao-shipment-qty.eao-ship-intransit{background:#e3f1ff;color:#0a58ca;border-radius:3px;padding:2px 4px;display:inline-block;min-width:22px;text-align:center}
.eao-shipment-qty.eao-ship-exception{background:#ffecec;color:#c62828;border-radius:3px;padding:2px 4px;display:inline-block;min-width:22px;text-align:center}
.eao-shipment-qty.eao-ship-hold{background:#fff6db;color:#b98500;border-radius:3px;padding:2px 4px;display:inline-block;min-width:22px;text-align:center}
.eao-shipment-qty.eao-ship-pending{background:#f2f2f2;color:#666;border-radius:3px;padding:2px 4px;display:inline-block;min-width:22px;text-align:center}

/* Column background tints by shipment status */
.tabulator-col.eao-shipcol-bg .tabulator-col-content{padding:2px}
.eao-shipcol-delivered{background:#eaf9ef !important}
.eao-shipcol-intransit{background:#e3f1ff !important}
.eao-shipcol-amber{background:#fff4d6 !important}
.eao-shipcol-exception{background:#ffe5e5 !important}
.eao-shipcol-pending{background:#f1f1f1 !important}

/* Ensure full coverage: header group and cell backgrounds */
.eao-shipcol-delivered .tabulator-col-content{background:#eaf9ef !important}
.eao-shipcol-intransit .tabulator-col-content{background:#e3f1ff !important}
.eao-shipcol-amber .tabulator-col-content{background:#fff4d6 !important}
.eao-shipcol-exception .tabulator-col-content{background:#ffe5e5 !important}
.eao-shipcol-pending .tabulator-col-content{background:#f1f1f1 !important}

.tabulator-cell.eao-shipcol-delivered{background:#eaf9ef !important}
.tabulator-cell.eao-shipcol-intransit{background:#e3f1ff !important}
.tabulator-cell.eao-shipcol-amber{background:#fff4d6 !important}
.tabulator-cell.eao-shipcol-exception{background:#ffe5e5 !important}
.tabulator-cell.eao-shipcol-pending{background:#f1f1f1 !important}

.eao-shipcol-title{font-weight:600;text-align:center;background:transparent}
#eao-current-order-items-list .tabulator { min-height: 120px; height: auto; }
#eao-current-order-items-list .tabulator-tableholder { min-height: 0; height: auto; overflow: visible; }

/* Tabulator cell/row background cleanup */
#eao-current-order-items-list .tabulator .tabulator-cell,
#eao-current-order-items-list .tabulator .tabulator-row { background: transparent !important; }
#eao-current-order-items-list .tabulator .tabulator-row:hover,
#eao-current-order-items-list .tabulator .tabulator-row.tabulator-selected { background: transparent !important; }

/* Disabled inputs fully transparent to avoid gray spill */
#eao-current-order-items-list .tabulator input[disabled] { background: transparent !important; }

/* Trash icon button - no background or border */
#eao-current-order-items-list .tabulator .eao-item-actions .button,
#eao-current-order-items-list .tabulator .eao-item-actions .button:focus,
#eao-current-order-items-list .tabulator .eao-item-actions .button:hover {
    background: transparent !important; border: none !important; box-shadow: none !important;
}

/* Stock hint visibility */
#eao-current-order-items-list .tabulator .eao-item-quantity .eao-item-stock-indicator,
#eao-current-order-items-list .tabulator .eao-item-quantity .eao-stock-hint { color: #555; }

/* Ensure inputs look clean inside transparent cells */
#eao-current-order-items-list .tabulator .eao-quantity-input,
#eao-current-order-items-list .tabulator .eao-item-discount-percent-input,
#eao-current-order-items-list .tabulator .eao-item-discounted-price-input { background: #fff !important; }
#eao-current-order-items-list .tabulator-placeholder { display: none !important; }
/* Graceful cross-fade for Tabulator column groups */
.tabulator .tabulator-col-group .tabulator-col-content { transition: opacity 160ms ease, visibility 160ms ease; }
.eao-hide-group { opacity: 0.0; visibility: hidden; }
/**
 * Enhanced Admin Order Plugin - Admin Styles
 * 
 * @package EnhancedAdminOrder
 * @since 1.0.0
 * @version 2.8.3 - CORRECTED: Enhanced button styling for longer text
 * @author Amnon Manneberg
 */

/* @keyframes eao-indeterminate-slide {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(250%); } 
} */ /* Commented out as it's no longer used */

.eao-edit-button .dashicons {
    font-size: 1.2em;
    vertical-align: middle;
}

/* Ensure the column header is properly aligned */
.widefat .column-eao_actions {
    text-align: center;
    width: 60px; /* Adjust as needed */
}

/* Customer Search Results Styling */
#eao_customer_search_results ul {
    list-style: none;
    margin: 5px 0 0 0;
    padding: 0;
    border: 1px solid #ddd;
    max-height: 150px; 
    overflow-y: auto;
    background-color: #fff;
    width: 100%; 
    box-sizing: border-box; 
}

#eao_customer_search_results li.eao-customer-search-item {
    padding: 8px 12px;
    cursor: pointer;
    border-bottom: 1px solid #eee;
}

#eao_customer_search_results li.eao-customer-search-item:last-child {
    border-bottom: none;
}

#eao_customer_search_results li.eao-customer-search-item:hover {
    background-color: #f0f0f0;
}

/* Ensure customer display name (which becomes a link) is visible */
#eao_customer_display_name a {
    color: #2271b1; 
    text-decoration: none;
}
#eao_customer_display_name a:hover {
    text-decoration: underline;
}

/* CSS to hide original WooCommerce add note elements if they appear within our refreshed notes box */
#woocommerce-order-notes .inside > div.add_note, 
#woocommerce-order-notes .inside > p.add_note, 
#woocommerce-order-notes .inside label[for="add_order_note"],
#woocommerce-order-notes .inside textarea#add_order_note,
#woocommerce-order-notes .inside select[name="order_note_type"],
#woocommerce-order-notes .inside button.add_note {
    display: none !important; 
}

/* Style the remove button for staged notes */
.eao-remove-staged-note {
    color: #d63638 !important; 
    text-decoration: none !important;
    border: none !important;
    background: none !important;
    padding: 0 0 0 5px !important;
    cursor: pointer;
    vertical-align: middle;
}
.eao-remove-staged-note:hover {
    color: #a02122 !important;
}

/* Styling for changed fields and previous values */
.eao-field-changed {
    border-color: #ffd54f !important; 
}

/* Specific styling for text/date/time inputs when changed */
input[type="text"].eao-field-changed,
input[type="date"].eao-field-changed,
input[type="time"].eao-field-changed,
textarea.eao-field-changed {
    background-color: #fff3c4 !important; 
    border: 1px solid #ffd54f !important;
    box-shadow: none !important; 
}

/* Ensure select2 containers also get highlighted if they are the target */
.select2-container.eao-field-changed .select2-selection {
    background-color: #fff3c4 !important; 
    border: 1px solid #ffd54f !important;
}

.eao-previous-value {
    font-size: 0.9em;
    color: #953436; 
    margin-left: 10px;
    font-style: italic;
}

.eao-customer-section .eao-previous-value {
    margin-left: 0; 
    padding-left: 5px; 
}

/* Styling for Staged Notes List Items */
#eao-staged-notes-list li {
    padding: 5px 0;
    overflow-wrap: break-word; 
    word-wrap: break-word; 
    white-space: normal; 
    list-style-type: none; 
    margin-bottom: 10px; 
}

#eao-staged-notes-list li:last-child {
    margin-bottom: 0;
}

#eao-staged-notes-list li strong {
    display: inline-block; 
    margin-right: 5px;
}

/* Container for staged notes - hidden by default, shown by JS if notes exist */
#eao-staged-notes-container {
    display: none;
}

/* Styling for the "Add Note" section wrapper */
#eao-add-note-wrapper {
    border: 1px solid #c8e6c9; 
    background-color: #e8f5e9; 
    padding: 10px; 
    margin-bottom: 15px; 
    border-radius: 4px;
}

/* Reduce margins inside the green box */
#eao-add-note-wrapper p,
#eao-add-note-wrapper h4,
#eao-add-note-wrapper ul {
    margin-top: 8px;
    margin-bottom: 8px;
}
#eao-add-note-wrapper p:first-child {
    margin-top: 0; 
}

.eao-note-type-radios label {
    vertical-align: middle;
}
.eao-note-type-radios input[type="radio"] {
    vertical-align: middle;
    margin-top: -1px; 
}

/* Styling for individual pending notes (balloon effect) */
.eao-pending-note-item {
    background-color: #ffebee; 
    border: 1px solid #ffcdd2;
    padding: 8px 10px; 
    border-radius: 4px;
    position: relative;
    box-shadow: 0 1px 1px rgba(0,0,0,.04);
    margin-bottom: 5px; 
}

.eao-pending-note-item.eao-pending-note-private {
    background-color: #f5f5f5; 
    border-color: #e0e0e0;
}
.eao-pending-note-item.eao-pending-note-customer {
    background-color: #e3f2fd; 
    border-color: #bbdefb;
}

.eao-pending-note-wrapper {
    margin-bottom: 5px; 
}

.eao-pending-note-meta-outside {
    font-size: 0.85em;
    color: #555;
    padding-left: 5px; 
    display: block; 
    margin-right: auto; 
    line-height: 1.4; 
}

.eao-pending-meta-action-wrapper {
    display: flex;
    justify-content: space-between;
    align-items: center; 
    padding: 0 5px; 
    margin-top: 3px; 
    gap: 5px; 
}

.eao-pending-note-item::before {
    content: "";
    position: absolute;
    bottom: -7px; 
    left: 15px; 
    width: 0;
    height: 0;
    border-left: 7px solid transparent;
    border-right: 7px solid transparent;
    border-top-width: 7px; 
    border-top-style: solid;
}

.eao-pending-note-item::after {
    content: "";
    position: absolute;
    bottom: -6px; 
    left: 16px;  
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top-width: 6px;
    border-top-style: solid;
}

.eao-pending-note-item.eao-pending-note-private::before {
    border-top-color: #e0e0e0; 
}
.eao-pending-note-item.eao-pending-note-private::after {
    border-top-color: #f5f5f5; 
}

.eao-pending-note-item.eao-pending-note-customer::before {
    border-top-color: #bbdefb; 
}
.eao-pending-note-item.eao-pending-note-customer::after {
    border-top-color: #e3f2fd; 
}

/* Meta Box Handling */
.postbox .hndle {
    cursor: default; /* Or `pointer` if you prefer that over the text selection cursor */
}

.postbox .handle-order-higher,
.postbox .handle-order-lower {
    display: none !important;
}

/* Main Order Details Three-Column Layout */
.eao-main-details-columns {
    display: flex;
    flex-wrap: wrap; 
    gap: 0; 
    border-top: 1px solid #e0e0e0; 
    border-bottom: 1px solid #e0e0e0; 
    margin-top: 10px;
    margin-bottom: 20px;
}

.eao-details-column {
    flex: 1;
    padding: 0 15px 15px 15px; 
    min-width: 0; 
    display: flex; 
    flex-direction: column; 
}

.eao-details-column:not(:last-child) {
    border-right: 1px solid #e0e0e0; 
}

.eao-details-column h3 {
    margin-top: 0;
    font-size: 1.1em; 
    margin-bottom: 10px;
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    padding-bottom: 5px; 
}

.eao-details-column h3 div { 
    display: flex;
    align-items: center;
    margin-top: 10px; 
}

.eao-details-column h3 .eao-edit-address-button,
.eao-details-column h3 .eao-save-address-button {
    margin-left: 5px; 
}

.eao-save-address-button.is-small.page-title-action,
.eao-edit-address-button.is-small.page-title-action {
    line-height: 1.5; 
    padding: 0 8px; 
}

.eao-address-display-container {
    display: flex;
    flex-direction: row;
    gap: 20px; 
    margin-bottom: 10px; 
}

.eao-address-display-current {
    flex: 1; 
}

.eao-previous-address-display {
    padding-left: 10px; 
    border-left: 1px solid #e0e0e0; 
}

.eao-address-display {
    margin-bottom: 10px; 
}

.eao-previous-address-display .eao-previous-label {
    font-weight: bold;
    color: #953436; 
    margin-right: 5px;
}

.eao-previous-address-display .eao-previous-address-value {
    font-style: italic;
    color: #953436;
    display: inline; 
}

.eao-choose-address-dropdown-wrapper .select2-container {
    width: 100% !important;
}

.eao-address-select-container {
    margin-top: auto; 
    padding-top: 10px; 
}

.eao-address-column .eao-address-section { 
    display: flex;
    flex-direction: column;
    flex-grow: 1; 
}
  
/* Customer Display Adjustments */
.eao-customer-main-line {
    display: flex;
    align-items: baseline; 
    margin-bottom: 5px; 
}

/* Compact roles line under customer */
.eao-customer-roles-line {
    display: flex;
    align-items: baseline;
    margin-top: 2px;
    gap: 6px;
}

.eao-inline-label {
    margin-right: 8px; 
}

.eao-inline-block {
    display: inline-block;
}

.eao-customer-previous-line .eao-previous-value {
    display: block; 
}

/* Date/Time Field Adjustments */
.eao-datetime-field {
    display: flex;
    flex-direction: column; 
    align-items: flex-start; 
}

.eao-datetime-field label {
    margin-bottom: 5px; 
}

.eao-datetime-inputs {
    display: flex; 
    align-items: center;
    gap: 10px; 
    margin-bottom: 5px; 
}

.eao-input-date,
.eao-input-time {
    padding: 5px;
    border: 1px solid #ddd;
    border-radius: 4px;
}

.eao-previous-datetime {
    display: block; 
    font-size: 0.9em;
    color: #777;
}

/* General utility for error messages in ajax-populated areas */
.eao-error-message {
    color: #d63638;
    padding: 10px;
    background-color: #fbeaea;
    border: 1px solid #f5c6cb;
    border-radius: 3px;
}

/* Added rule for price font colors */
.eao-item-price .eao-price-display,
.eao-item-discounted-price .eao-discounted-price-display,
.eao-item-total .eao-line-total-display,
#eao-order-items-summary-section span.eao-summary-price-value { 
    color: #2271b1;
    font-weight: bold; 
}

/* Enhanced Admin Order - Styles (Resumed from previous state before duplication) */

/* Ensure this file is loaded after any WooCommerce or WordPress core admin styles if specificity issues arise. */

/* General styles for the EAO editor page */
.eao-editor-page-container {
    margin-top: 20px;
}

/* Styling for changed fields */
.eao-field-changed {
    border-left: 3px solid #ffba00 !important; 
    background-color: #fff8e1 !important; 
}

/* Styling for select2 containers when changed */
.select2-container.eao-field-changed .select2-selection--single {
    border-left: 3px solid #ffba00 !important;
    background-color: #fff8e1 !important;
}

/* Styling for previous value display - NOTE: This is a more general .eao-previous-value, 
   the one at the top (around line 70) is more specific for order details section */
.eao-previous-value {
    display: block; 
    font-size: 0.9em;
    color: #777;
    margin-top: 2px;
    padding-left: 5px;
}

/* Customer Search UI */
#eao_customer_search_ui {
    padding: 10px;
    border: 1px solid #ddd;
    margin-top: 10px;
    background-color: #f9f9f9;
}
/* Customer Search Results are styled further up */

.eao-customer-search-item.eao-item-already-staged {
    background-color: #e6ffe6; 
    cursor: default;
}


/* Meta Box Styling - Ensure our custom meta boxes look consistent */
/* .postbox .hndle, .postbox .handlediv are styled further up */

/* Hide the reorder arrows if not used */
/* .meta-box-sortables .postbox .handle-order-higher, etc. are styled further up */


/* Custom Order Notes Meta Box */
#eao-custom-order-notes .inside {
    padding-top: 0; 
}

.eao-custom-add-note-ui textarea {
    margin-bottom: 8px;
}

.eao-custom-add-note-ui .eao-note-type-radios label {
    margin-right: 5px;
    vertical-align: middle;
}
.eao-custom-add-note-ui .eao-note-type-radios input[type="radio"] {
    margin-right: 3px;
    vertical-align: middle;
}

#eao-staged-notes-container {
    margin-top: 15px;
}

#eao-staged-notes-container h4 {
    margin-bottom: 8px;
    font-size: 1.1em;
}

#eao-staged-notes-list {
    list-style: none;
    margin: 0;
    padding: 0;
}

.eao-pending-note-wrapper {
    margin-bottom: 12px;
    padding-bottom: 12px;
    border-bottom: 1px dashed #e0e0e0;
}
.eao-pending-note-wrapper:last-child {
    border-bottom: none;
    margin-bottom: 0;
    padding-bottom: 0;
}

/* .eao-pending-note-item and its variants are styled further up */

.eao-note-content-display {
    white-space: pre-wrap; 
}

/* .eao-pending-meta-action-wrapper is styled further up */
/* p.eao-pending-note-meta-outside is styled further up */
/* button.eao-remove-staged-note is styled further up */


/* Order Notes (Existing - from wc_get_order_notes) */
.order_notes {
    padding: 0 !important;
    margin: 0 !important;
}
.order_notes li.note {
    padding: 10px;
    border: 1px solid #e5e5e5;
    margin-bottom: 10px;
    background: #fff;
    border-radius: 3px;
}
.order_notes li.note .note_content {
    margin: 0 0 0.5em;
    padding: 0;
    word-wrap: break-word;
    white-space: pre-wrap;
}
.order_notes li.note p.meta {
    font-size: 0.9em;
    color: #777;
    margin:0;
    padding:0;
}
.order_notes li.note p.meta abbr {
    text-decoration: none;
    border-bottom: none;
}
.order_notes li.note.customer-note {
    background: #f8f8f9;
    border-color: #d3dfea;
}
.order_notes li.note.system-note {
    background: #f0f0f0; 
    border-color: #ccc;
}

/* From customer (checkout) note styling */
.order_notes li.note.from-customer-note {
    background: #fff8d1; /* pale yellow */
    border-color: #f2d36b;
}

/* Layout: Main content column and sidebar */
#eao-main-content {
    width: 70%; 
    float: left;
}

#eao-sidebar {
    width: 28%; 
    float: right;
}

/* Clearfix for floated columns */
.eao-columns-container::after {
    content: "";
    clear: both;
    display: table;
}

/* Styling for address sections */
.eao-address-section .wc-address-fields-wrapper {
    padding: 10px;
    border: 1px solid #e0e0e0;
    background-color: #fdfdfd;
    margin-top: 10px;
}

/* Badge showing address book index next to displayed address */
.eao-address-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 20px;
    height: 20px;
    line-height: 20px;
    border-radius: 50%;
    background-color: #2271b1;
    color: #fff;
    font-weight: 600;
    font-size: 12px;
    margin-right: 6px;
}

.eao-address-key-line {
    display: flex;
    justify-content: flex-start;
    margin-bottom: 4px;
}

/* Right-aligned badge/default pill within address block */
.eao-address-display-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 10px;
}
.eao-address-text {
    flex: 1 1 auto;
}
.eao-address-key-right {
    flex: 0 0 auto;
}
.eao-address-default-pill {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 20px;
    height: 20px;
    line-height: 20px;
    padding: 0 6px;
    border-radius: 10px;
    background-color: #2271b1; /* match badge color */
    color: #fff;
    font-size: 11px;
    font-weight: 600;
    margin-left: 6px;
}

.eao-address-section .eao-address-input-container {
    display: none; 
}

/* .eao-previous-address-display is styled further up */

.eao-form-row-address-halves {
    display: flex;
    justify-content: space-between;
}
.eao-form-row-address-halves .form-row {
    width: 48%;
}

#eao-billing-fields-inputs .form-row input[type="text"],
#eao-billing-fields-inputs .form-row select,
#eao-shipping-fields-inputs .form-row input[type="text"],
#eao-shipping-fields-inputs .form-row select {
    width: 100%;
    box-sizing: border-box;
}

.eao-address-action-buttons {
    margin-top: 10px;
    display: flex; 
    gap: 10px; 
}

.eao-edit-address-button-container {
    margin-top: 10px; 
}

/* Customer Name Display */
#eao_customer_current_display .form-field label {
    font-weight: normal; 
    margin-right: 5px;
}
#eao_customer_current_display .form-field > span, 
#eao_customer_current_display .form-field > a {
    display: inline; 
}
#eao_previous_customer {
    display: block; 
    margin-left: 0; 
}

/* Date/Time "Was:" Display */
.eao-datetime-input-wrapper + .eao-previous-value {
    display: block; 
    margin-top: 5px;
}


/* --- Order Products Meta Box --- */
#eao-product-controls-row {
    display: flex;
    align-items: center; /* Ensuring this is present */
    margin-bottom: 15px;
}

.eao-search-area-wrapper {
    flex-grow: 1;
    margin-right: 20px;
    position: relative; 
}

#eao_product_search_term {
    width: 100%;
    box-sizing: border-box;
}

/* Ensure search stretches fully to the right until the global discount input */
#eao-product-controls-row .eao-search-area-wrapper { 
    flex: 1 1 auto; 
    margin-right: 0; 
}

/* In the top controls row, hide alignment placeholders so only the global discount cell remains */
#eao-order-global-discount-alignment-row .eao-header-thumb,
#eao-order-global-discount-alignment-row .eao-header-product,
#eao-order-global-discount-alignment-row .eao-header-price,
#eao-order-global-discount-alignment-row .eao-header-exclude-discount,
#eao-order-global-discount-alignment-row .eao-header-discount,
#eao-order-global-discount-alignment-row .eao-header-quantity,
#eao-order-global-discount-alignment-row .eao-header-total,
#eao-order-global-discount-alignment-row .eao-header-actions { 
    display: none !important; 
}

/* Keep the discount cell sized to its contents so the search can take the rest */
#eao-order-global-discount-alignment-row { 
    flex: 0 0 auto; 
}

#eao_product_search_results {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background-color: #fff;
    border: 1px solid #ccc;
    border-top: none;
    z-index: 1000; 
    max-height: 300px;
    overflow-y: auto;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

#eao_product_search_results ul {
    list-style: none;
    margin: 0;
    padding: 0;
}

#eao_product_search_results li.eao-product-search-item {
    display: flex;
    align-items: center;
    padding: 8px 10px;
    cursor: pointer;
    border-bottom: 1px solid #eee;
}
#eao_product_search_results li.eao-product-search-item:last-child {
    border-bottom: none;
}
#eao_product_search_results li.eao-product-search-item:hover {
    background-color: #f0f5fa;
}

.eao-search-item-thumb img {
    width: 40px;
    height: 40px;
    object-fit: cover;
    margin-right: 10px;
    border: 1px solid #eee;
}

.eao-search-item-details {
    flex-grow: 1;
}

.eao-search-item-name {
    font-weight: 600;
    color: #2271b1;
    white-space: normal;
    overflow: visible;
    text-overflow: clip;
    word-break: break-word;
}

.eao-search-item-sku,
.eao-search-item-stock {
    font-size: 0.85em;
    color: #555;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: inline; /* Ensure they are on the same line */
}

.eao-search-item-sku + .eao-search-item-stock {
    margin-left: 8px; /* Add space between SKU and Stock in search results */
}

.eao-search-item-price {
    white-space: nowrap;
    font-weight: bold;
    min-width: 60px; 
    text-align: right;
}

.eao-product-editor-headers,
.eao-product-editor-item {
    display: flex;
    align-items: center;
    padding: 2px 0; /* Remove horizontal padding from row, apply to cells */
    border-bottom: 1px solid #eee;
}

.eao-product-editor-headers {
    font-weight: bold;
    background-color: #f9f9f9;
    border-bottom: 1px solid #ddd;
}

.eao-product-editor-item:last-child {
    border-bottom: none;
}

/* Add alternating row colors for better readability */
.eao-product-editor-item:nth-child(odd) {
    background-color: #f9f9f9;
}
.eao-product-editor-item:nth-child(even) {
    background-color: #fff;
}

.eao-header-thumb, .eao-item-thumb,
.eao-header-product, .eao-item-content,
.eao-header-points, .eao-item-points,
.eao-header-cost, .eao-item-cost,
.eao-header-price, .eao-item-price,
.eao-header-exclude-discount, .eao-item-exclude-discount,
.eao-header-discount, .eao-item-discount,
.eao-header-discounted-price, .eao-item-discounted-price,
.eao-header-quantity, .eao-item-quantity,
.eao-header-total, .eao-item-total,
.eao-header-actions, .eao-item-actions { /* ADDED actions here for consistent padding */
    border-right: none !important; /* remove legacy vertical separators */
    padding-left: 5px;
    padding-right: 5px;
    box-sizing: border-box; /* Ensure padding is included in width */
}

.eao-header-actions, .eao-item-actions { border-right: none !important; }

/* Adjust fixed widths to account for new padding (10px total per cell) */
/* Original widths are commented for reference */

.eao-header-thumb, .eao-item-thumb {
    width: 42px; /* Was 32px + 10px padding */
    text-align: center;
    flex-shrink: 0;
}

.eao-item-thumb img {
    max-width: 100%;
    max-height: 32px; /* Limit image height to match width */
    height: auto;
    border: 1px solid #ddd;
    display: block; 
}

/* Constrain product column to prevent overflow */
.eao-header-product, .eao-item-content {
    flex: 1 1 420px; /* allow shrink/grow, base 420px */
    max-width: 520px; /* cap to keep room for Qty/Details/Total */
}

/* Ensure image column stays compact */
.eao-header-thumb, .eao-item-thumb { width: 42px; flex: 0 0 42px; }

/* Keep Qty column narrow and fixed */
.eao-header-quantity, .eao-item-quantity { width: 80px; flex: 0 0 80px; }

/* Details (tabs) fixed to a reasonable width */
.eao-header-tabs, .eao-item-tabs { width: 220px; flex: 0 0 220px; }

/* Total column fixed */
.eao-header-total, .eao-item-total { width: 100px; flex: 0 0 100px; }

/* Actions column fixed */
.eao-header-actions, .eao-item-actions { width: 50px; flex: 0 0 50px; }

/* Avoid product title wrapping too little; allow wrap but not overflow */
.eao-item-title { white-space: normal; word-break: break-word; }

.eao-item-meta {
    font-size: 0.85em; 
    color: #666;
    line-height: 1; /* Tighter line height */
}

.eao-item-variation-meta {
    font-size: 0.8em; 
    color: #777;
    margin-top: 0px; /* Remove margin */
    line-height: 1; /* Tighter line height */
}

/* Product column layout with right-aligned stock label */
.eao-product-content-row { display: flex; align-items: center; justify-content: space-between; gap: 8px; }
.eao-item-info { min-width: 0; }
.eao-product-stock { flex: 0 0 auto; display: flex; align-items: center; justify-content: flex-end; }
.eao-product-stock .eao-item-stock-indicator { font-size: 12px; white-space: nowrap; }
/* Stock text colors */
.eao-product-stock .eao-item-stock-indicator.eao-stock-sufficient { color: #38761d; }
.eao-product-stock .eao-item-stock-indicator.eao-stock-exact { color: #b45309; }
.eao-product-stock .eao-item-stock-indicator.eao-stock-insufficient { color: #990000; }

/* Input fields within items */
.eao-discount-percent-input,
.eao-quantity-input,
.eao-item-discounted-price-input {
    width: 60px !important;
    text-align: right;
    padding: 2px 1px !important;
    height: 28px;
    border: 1px solid #ddd;
    box-sizing: border-box;
}

/* New styles for input alignment and text below */
.eao-input-align-wrapper {
    height: 28px; /* Match input height */
    display: flex;
    align-items: center; /* Vertically center input within this wrapper */
    margin-bottom: 1px; /* Minimal space before text below */
}

.eao-input-align-wrapper-center {
    justify-content: center; /* Center input for Qty column */
}

.eao-input-align-wrapper-right {
    justify-content: flex-end; /* Align input to right for Disc. Price */
}

.eao-item-quantity { text-align: center; }

.eao-item-quantity .eao-item-stock-indicator {
    line-height: 1.1;
    font-size: 0.85em;
    display: block; /* Ensure it takes its own line below the wrapper */
}

.eao-item-discounted-price {
    /* text-align: right; */ /* REMOVED */
    display: flex; /* NEW */
    flex-direction: column; /* NEW */
    align-items: center; /* NEW - Center input wrapper and text block */
}

.eao-item-monetary-discount-display {
    font-size: 0.85em;
    color: #b45309;
    margin-top: 0; /* Text is now after wrapper, so less/no margin needed here */
    line-height: 1.1;
    display: block; /* Ensure it takes its own line below the wrapper */
}

/* Adjust discount controls to also have fixed height for alignment */
.eao-discount-controls {
    display: flex;
    align-items: center;
    height: 28px; /* Match input height for consistent alignment target */
    justify-content: center; /* Center its content (input + %) */
}

/* Ensure spans within the indicator are styled as before if needed */
.eao-item-stock-indicator .eao-stock-sufficient,
.eao-item-stock-indicator .eao-stock-exact,
.eao-item-stock-indicator .eao-stock-insufficient {
    display: inline;
}

/* Styling for pending items */
.eao-product-editor-item.is-pending {
    background-color: #e6ffed; 
    border-left: 3px solid #4CAF50; 
}

/* Tabulator rows use these classes on the row element */
.tabulator-row.eao-staged {
    background-color: #e6ffed !important;
    box-shadow: inset 3px 0 0 0 #4CAF50 !important;
}
.tabulator-row.eao-pending-deletion {
    background-color: #ffebee !important;
    box-shadow: inset 3px 0 0 0 #f44336 !important; /* no layout shift */
    opacity: 0.7;
}
.tabulator-row.eao-pending-deletion input,
.tabulator-row.eao-pending-deletion select,
.tabulator-row.eao-pending-deletion button {
    pointer-events: none;
}
.tabulator-row.eao-pending-deletion .eao-item-actions button:not(.eao-undo-delete-button) {
    opacity: 0.5 !important;
}
.tabulator-row.eao-pending-deletion .eao-item-actions button.eao-undo-delete-button {
    pointer-events: auto !important;
    opacity: 1 !important;
}

/* Styling for items pending deletion */
.eao-product-editor-item.is-pending-deletion {
    background-color: #ffebee !important; 
    border-left: 3px solid #f44336 !important; 
    opacity: 0.7;
}
.eao-product-editor-item.is-pending-deletion input,
.eao-product-editor-item.is-pending-deletion select,
.eao-product-editor-item.is-pending-deletion button { 
    pointer-events: none;
}

/* Fade buttons that are NOT the undo button in a pending deletion row */
.eao-product-editor-item.is-pending-deletion .eao-item-actions button:not(.eao-undo-delete-button) {
    opacity: 0.5 !important;
}

/* Ensure the undo button IS clickable and fully opaque */
.eao-product-editor-item.is-pending-deletion .eao-item-actions button.eao-undo-delete-button {
    pointer-events: auto !important;
    opacity: 1 !important;
}

/* Stock text colors */
.eao-stock-sufficient {
    color: #38761d; 
}
.eao-stock-exact {
    color: #b45309; 
}
.eao-stock-insufficient {
    color: #990000; 
}

#eao-order-items-summary-section {
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid #ddd;
}

.eao-summary-row {
    display: flex;
    justify-content: space-between; /* Distribute space between label and value */
    padding: 3px 0; /* Reduced padding slightly */
    align-items: center;
    /* gap: 10px; Removed direct gap, space-between will handle it */
}

/* NEW: Spacers for summary row alignment */
.eao-summary-spacer-left {
    flex-grow: 1; /* Takes up space to the left of the label */
    /* This will push the label and value to the right */
}

.eao-summary-spacer-actions {
    width: 40px; /* Matches .eao-header-actions width */
    flex-shrink: 0;
}

.eao-summary-label {
    text-align: right; /* Align label text to the right, before the value */
    flex-grow: 0;
    flex-shrink: 0;
    margin-right: 10px; /* Space between label and value */
    /* Consider a fixed width or min-width if labels vary too much */
    /* min-width: 150px; */ 
}

.eao-summary-value {
    font-weight: bold;
    text-align: right;
    flex-grow: 0; /* Do not allow value to grow; spacers will manage width */
    flex-shrink: 0;
    min-width: 90px; /* Matches .eao-header-total width for alignment */
}

/* NEW: Class for all monetary values in summary for consistent styling */
.eao-summary-monetary-value {
    color: #2271b1; /* Blue color like table prices */
    font-weight: bold; /* Already on .eao-summary-value, but ensure it for this specific context too */
}

/* Ensure grand total value also gets this if it's separate */
.eao-grand-total-value.eao-summary-monetary-value {
    color: #2271b1; /* Reinforce for grand total specifically if needed */
}

/* Styling for the new shipping description row */
/* .eao-summary-shipping-description-row { */
    /* Inherits .eao-summary-row flex properties, which is fine */
    /* padding-top: 0; Remove top padding if too much space */
/* } */

.eao-shipping-description-wrapper {
    /* This div will contain the description and should span the label and value areas */
    flex-grow: 1; /* Allow it to take available space after the left spacer */
    text-align: right; /* Align the text content (description) to the right */
    padding-right: 0; /* Align with the right edge of the values above */
    /* We need to make sure it doesn't push the .eao-summary-spacer-actions out */
    /* The parent .eao-summary-row uses justify-content: space-between */
    /* Let's ensure this wrapper doesn't grow excessively if the description is short */
    /* No, flex-grow: 1 on spacer-left and this one set to 0 should work if value is short*/
    /* Re-thinking: the spacer-left pushes content right. This wrapper should align with where labels would be, or slightly indented. */
}

.eao-shipping-method-description {
    font-size: 0.9em;
    color: #555;
    display: block; /* Make it take the full width of its wrapper */
    /* text-align: right; -- Handled by wrapper */
    padding-top: 2px; /* Small space above description */
}

.eao-grand-total-row {
    border-top: 1px solid #ccc;
    padding-top: 10px;
    margin-top: 5px;
    font-size: 1.1em;
    display: flex; /* Ensure flex for grand total specific spacers */
    justify-content: flex-end; /* Align content to the right */
    align-items: center;
}

.eao-summary-spacer-left-grand-total {
    flex-grow: 1; /* Pushes grand total label and value to the right */
}

.eao-grand-total-row .eao-grand-total-label {
    font-weight: bold;
    color: #333;
    text-align: right; /* Label text to the right */
    margin-right: 10px; /* Space between label and value */
    flex-shrink: 0;
}
.eao-grand-total-row .eao-grand-total-value {
    font-weight: bold; /* Ensure bold */
    color: #000; /* Default, JS will apply .eao-summary-monetary-value for blue */
    text-align: right; /* Ensure text is right aligned */
    min-width: 90px; /* Match other totals */
    flex-shrink: 0; /* Prevent shrinking */
}

/* Styling for the unified remove item button */
.eao-product-editor-item .eao-item-actions .eao-remove-item-button {
    background: none !important; 
    border: none !important; 
    box-shadow: none !important; 
    padding: 0; 
    margin: 0; 
    line-height: 1; 
    cursor: pointer;
}

.eao-product-editor-item .eao-item-actions .eao-remove-item-button .dashicons-trash {
    color: #a0a5aa; 
    font-size: 18px; 
}

.eao-product-editor-item .eao-item-actions .eao-remove-item-button:hover .dashicons-trash,
.eao-product-editor-item .eao-item-actions .eao-remove-item-button:focus .dashicons-trash {
    color: #cc0000; 
}

.eao-product-editor-item .eao-item-actions .eao-remove-item-button:focus {
    outline: none !important;
}

/* Added rule for spacing between SKU and Stock in main product list */
.eao-item-sku + .eao-item-stock {
    margin-left: 8px;
}

/* Add a specific rule for the global discount input */
#eao-product-controls-row .eao-global-discount-area input[type="number"] {
    width: 60px;
    text-align: right;
}

/* Responsive cap: on wide screens, keep search width around mid-page separator */
@media (min-width: 1200px) {
    #eao-product-controls-row .eao-search-area-wrapper {
        max-width: 900px; /* approximate alignment with addresses separator */
    }
}

/* Visual separator between search field and global discount controls */
.eao-controls-separator {
    width: 1px;
    height: 28px;
    background: #ddd;
    margin: 0 10px;
    flex: 0 0 1px;
}

/* Two-line label styling for compact width */
.eao-gd-label span {
    display: block;
}

/* Stock-based quantity input backgrounds */
.eao-quantity-input.eao-qty-exact-stock,
.eao-search-item-qty.eao-qty-exact-stock {
    background-color: #fffacd !important; /* Pale yellow for exact stock match */
}

.eao-quantity-input.eao-qty-exceeds-stock,
.eao-search-item-qty.eao-qty-exceeds-stock {
    background-color: #ffdddd !important; /* Pale red for exceeding stock/backorder */
}

.eao-quantity-input.eao-qty-sufficient-stock,
.eao-search-item-qty.eao-qty-sufficient-stock {
    background-color: #e8f5e9 !important; /* Pale green for sufficient stock */
}

.eao-header-exclude-discount, .eao-item-exclude-discount {
    width: 40px; /* Was 30px + 10px padding */
    text-align: center;
    flex-shrink: 0;
    display: flex; /* Ensure this cell centers its content */
    justify-content: center; /* Ensure this cell centers its content */
    align-items: center; /* Ensure this cell centers its content */
    height: 28px; /* Give it a consistent height like input wrappers */
}

.eao-header-discount, .eao-item-discount {
    width: 100px; /* Was 90px + 10px padding */
    text-align: center;
    flex-shrink: 0;
}

.eao-header-discounted-price, .eao-item-discounted-price {
    width: 90px; /* Was 80px + 10px padding */
    /* text-align: right; */ /* Flex align handles this now */
    display: flex; 
}

.eao-header-quantity, .eao-item-quantity {
    width: 80px; /* Was 70px + 10px padding */
    text-align: center;
    flex-shrink: 0;
}

.eao-header-total, .eao-item-total {
    width: 100px; /* Was 90px + 10px padding */
    text-align: right;
    font-weight: bold;
    flex-shrink: 0;
}

/* Dynamic Shipment columns (added when 2+ shipments) */
.eao-item-shipment {
    width: 70px;
    text-align: center;
    flex-shrink: 0;
}
.eao-item-shipment .eao-shipment-qty { display: inline-block; min-width: 18px; }

.eao-header-actions, .eao-item-actions {
    width: 50px; /* Was 40px + 10px padding */
    text-align: center;
    flex-shrink: 0;
}

/* Cost/Price columns width */
.eao-header-points, .eao-item-points {
    width: 100px;
    text-align: center;
    flex-shrink: 0;
    padding-left: 0; /* tighten like cost so it fits on one line */
    padding-right: 0;
}

.eao-header-cost, .eao-item-cost {
    width: 90px;
    text-align: right;
    flex-shrink: 0;
}

.eao-item-points .eao-points-earn-value {
    font-weight: 600;
}
.eao-item-points .eao-points-details-btn {
    margin-left: 6px;
    padding: 2px 6px;
    height: 24px;
    line-height: 20px;
}

/* Align points display like cost: value above, button below */
.eao-item-points { display: block; }
.eao-item-points .eao-points-display { font-weight: normal; margin-bottom: 2px; background: transparent; border: none; padding: 0; box-shadow: none; white-space: nowrap; }
.eao-item-cost .button.eao-apply-cost-btn { margin-left: 6px; padding: 0 2px; height: 20px; line-height: 18px; background: transparent !important; border: none !important; box-shadow: none !important; }
.eao-item-cost .button.eao-apply-cost-btn.eao-apply-cost-icon { width: 20px; min-width: 20px; padding: 0; display: inline-flex; align-items: center; justify-content: center; }
.eao-item-cost .button.eao-apply-cost-btn .dashicons { font-size: 14px; color: #6b7280; }
.eao-item-cost .button.eao-apply-cost-btn:hover .dashicons { color: #2271b1; }
/* align cost value with right arrow inline */
.eao-cost-wrapper { display: inline-flex; flex-direction: row; align-items: center; gap: 6px; }
.eao-item-cost { display: flex; align-items: center; justify-content: center; }
.eao-item-cost .eao-apply-right { order: 2; }

/* Tabulator Cost cell compact icon with no chrome */
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="cost"] {
	text-align: center !important;
}
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="cost"] .eao-cost-display {
	display: inline-block;
	white-space: nowrap;
}
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="cost"] .eao-apply-cost-btn {
	margin-left: 4px;
	padding: 0 !important;
	width: 16px;
	height: 16px;
	line-height: 16px;
	background: transparent !important;
	border: none !important;
	box-shadow: none !important;
	vertical-align: middle;
}
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="cost"] .eao-apply-cost-btn .dashicons {
	font-size: 14px;
	line-height: 1;
	color: #6b7280;
}
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="cost"] .eao-apply-cost-btn:hover .dashicons {
	color: #2271b1;
}
.eao-header-price, .eao-item-price {
    width: 90px;
    text-align: right;
    flex-shrink: 0;
}

/* Styling for the retired shipping line in the order summary */
.eao-summary-shipping-retired .eao-summary-label,
.eao-summary-shipping-retired .eao-summary-value {
    font-size: 0.9em;
    color: #c9a7a7; /* Pale red */
}

/* Ensure monetary values in summary maintain their blue color by default if not overridden */
.eao-summary-row .eao-summary-value.eao-summary-monetary-value {
    color: #0073aa; /* WordPress default blue for links/monetary values */
    font-weight: bold;
}

/* Override for the retired shipping line's monetary value to be pale red */
/* Make this more specific to override the general .eao-summary-monetary-value */
.eao-summary-row.eao-summary-shipping-retired .eao-summary-value.eao-summary-monetary-value {
    color: #c9a7a7 !important; /* Pale red - added !important to ensure override */
    font-weight: normal !important; /* Optional: remove bold for retired value - added !important */
}

/* Order Summary Table Styling */
#eao-current-order-items-summary {
    /* Container for the summary table */
    display: flex;
    justify-content: flex-end; /* Aligns the table (child) to the right */
    padding-top: 15px;
    padding-bottom: 15px;
}

.eao-summary-table {
    width: auto; /* Adjust as needed, or use a max-width */
    min-width: 300px; /* Example minimum width */
    border-collapse: collapse; /* Clean borders */
}

.eao-summary-table .eao-summary-row td {
    padding: 4px 8px; /* Padding for cells */
    vertical-align: top;
}

.eao-summary-table .eao-summary-label {
    text-align: right;
    font-weight: normal;
    color: #555;
    padding-right: 10px;
}

.eao-summary-table .eao-summary-value {
    text-align: left;
    font-weight: bold;
}

.eao-summary-table .eao-summary-value.eao-summary-monetary-value {
    color: #0073aa; /* WordPress default blue for links/monetary values */
    font-weight: bold;
}

/* Retired Shipping Line Styling */
.eao-summary-table .eao-summary-row.eao-summary-shipping-retired .eao-summary-label,
.eao-summary-table .eao-summary-row.eao-summary-shipping-retired .eao-summary-value {
    font-size: 0.9em;
    color: #c9a7a7 !important; /* Pale red, !important to override general monetary if needed */
    font-weight: normal !important;
}

/* Subtotal and Grand Total styling */
.eao-summary-table .eao-summary-row.eao-summary-subtotal-line td,
.eao-summary-table .eao-summary-row.eao-grand-total-line td {
    border-top: 1px solid #eee;
    padding-top: 8px;
    margin-top: 5px;
}

.eao-summary-table .eao-summary-row.eao-grand-total-line .eao-summary-label,
.eao-summary-table .eao-summary-row.eao-grand-total-line .eao-summary-value {
    font-size: 1.1em;
    font-weight: bold;
}

/* Global Discount Input Field Highlighting */
#eao_order_products_discount_percent.eao-field-changed {
    border-color: #ffba00; /* Example highlight color */
    box-shadow: 0 0 2px rgba(255,186,0,.8);
}

/* Ensure monetary values in summary maintain their blue color by default if not overridden */
.eao-summary-row .eao-summary-value.eao-summary-monetary-value {
    color: #0073aa; /* WordPress default blue for links/monetary values */
    font-weight: bold;
}

/* Override for the retired shipping line's monetary value to be pale red */
/* Make this more specific to override the general .eao-summary-monetary-value */
.eao-summary-row.eao-summary-shipping-retired .eao-summary-value.eao-summary-monetary-value {
    color: #c9a7a7 !important; /* Pale red - added !important to ensure override */
    font-weight: normal !important; /* Optional: remove bold for retired value - added !important */
}

.eao-shipstation-live-rates-section {
    border-top: 2px solid #9e9e9e;
    margin-top: 20px !important;
    padding-top: 15px;
}

/* Inline Points Slider in Summary Section - True Inline Layout */
.eao-summary-row-with-control .eao-summary-label-with-control {
    vertical-align: middle;
    padding: 8px;
    width: auto; /* Let it size naturally */
    white-space: nowrap; /* Prevent wrapping that could affect alignment */
}

.eao-summary-label-text {
    display: inline;
    margin-right: 8px;
}



/* CRITICAL: Ensure the monetary value column matches exactly with other summary rows */
.eao-summary-row-with-control .eao-summary-value {
    text-align: left !important; /* Align text to the left */
    vertical-align: middle !important; /* Keep vertical alignment in middle */
    padding: 0 !important; /* Remove padding to match baseline .eao-summary-value */
    font-weight: bold; /* Match baseline .eao-summary-value */
    width: auto; /* Let it behave like other monetary columns */
    min-width: 90px; /* Match baseline .eao-summary-value exactly */
    flex-grow: 0; /* Match baseline .eao-summary-value */
    flex-shrink: 0; /* Match baseline .eao-summary-value */
    line-height: 1.4 !important; /* Force consistent line height */
    height: auto; /* Let height adjust naturally */
}

/* Force exact alignment by matching the normal summary row structure */
.eao-summary-row-with-control .eao-summary-value.eao-summary-monetary-value {
    /* Remove all custom padding - let it inherit from parent container alignment */
    padding: 0 !important;
    margin: 0 !important;
    /* Ensure it inherits all baseline monetary value styling */
    color: #2271b1; /* Match baseline .eao-summary-monetary-value */
    font-weight: bold; /* Match baseline .eao-summary-monetary-value */
    /* Force perfect vertical centering with left text alignment */
    vertical-align: middle !important;
    text-align: left !important;
    line-height: 1.4 !important;
}

/* Ensure the entire table row has proper vertical alignment */
.eao-summary-row-with-control td {
    vertical-align: middle !important;
    line-height: 1.4 !important;
}

/* Ensure the slider container doesn't interfere with table layout */
.eao-summary-row-with-control .eao-summary-label-with-control {
    max-width: none; /* Remove width constraints */
    width: auto;
}

.eao-summary-control-container {
    display: inline-flex;
    align-items: center;
    vertical-align: middle;
    margin-left: 8px;
    max-width: 200px; /* Further reduced to give more space to amount column */
    flex-shrink: 1; /* Allow shrinking if needed */
}

/* Responsive handling */
@media (max-width: 768px) {
    .eao-summary-control-container {
        max-width: 250px;
    }
    
    .eao-inline-points-slider-container {
        max-width: 200px;
    }
}

/* Inline Points Input Field in Label */
.eao-points-input-inline {
    width: 60px !important;
    height: 20px !important;
    padding: 2px 4px !important;
    border: 1px solid #ddd !important;
    border-radius: 3px !important;
    font-size: 12px !important;
    text-align: center !important;
    background: #fff !important;
    margin: 0 2px !important;
    vertical-align: baseline !important;
    box-sizing: border-box !important;
}

.eao-points-input-inline:focus {
    outline: none !important;
    border-color: #2271b1 !important;
    box-shadow: 0 0 0 1px #2271b1 !important;
}

/* Ensure summary label aligns properly with input */
.eao-summary-row-with-control .eao-summary-label {
    vertical-align: middle;
    line-height: 1.4;
}

.eao-inline-points-slider-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    max-width: 250px; /* Accommodate labels + slider */
}

.eao-slider-labels {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    position: relative;
}

.eao-slider-min-label,
.eao-slider-max-label {
    font-size: 12px;
    color: #666;
    font-weight: normal;
    flex-shrink: 0;
    min-width: 30px;
    text-align: center;
}

.eao-slider-min-label {
    margin-right: 8px;
}

.eao-slider-max-label {
    margin-left: 8px;
}

.eao-inline-slider {
    flex: 1;
    height: 24px; /* Increased height for better usability */
    background: #f1f1f1;
    border-radius: 12px;
    outline: none;
    -webkit-appearance: none;
    appearance: none;
    cursor: pointer; /* Make entire slider clickable */
    margin: 0 8px; /* Space between slider and labels */
}

.eao-inline-slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px; /* Larger thumb for easier dragging */
    height: 20px;
    border-radius: 50%;
    background: #2271b1;
    cursor: grab; /* Indicate draggable */
    border: 2px solid #fff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    transition: all 0.2s ease; /* Smooth hover transition */
}

.eao-inline-slider::-webkit-slider-thumb:active {
    cursor: grabbing; /* Show grabbing during drag */
    transform: scale(1.1); /* Slightly larger when active */
}

.eao-inline-slider::-moz-range-thumb {
    width: 20px; /* Larger thumb for easier dragging */
    height: 20px;
    border-radius: 50%;
    background: #2271b1;
    cursor: grab; /* Indicate draggable */
    border: 2px solid #fff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    transition: all 0.2s ease; /* Smooth hover transition */
}

.eao-inline-slider::-moz-range-thumb:active {
    cursor: grabbing; /* Show grabbing during drag */
    transform: scale(1.1); /* Slightly larger when active */
}

.eao-inline-slider::-webkit-slider-track {
    height: 4px;
    border-radius: 2px;
    background: #ddd;
}

.eao-inline-slider::-moz-range-track {
    height: 4px;
    border-radius: 2px;
    background: #ddd;
    border: none;
}

.eao-inline-slider:hover::-webkit-slider-thumb {
    background: #135e96;
}

.eao-inline-slider:hover::-moz-range-thumb {
    background: #135e96;
}

.eao-inline-input {
    display: none !important; /* Hidden but available for form submission */
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .eao-summary-control-container {
        max-width: 250px;
    }
    
    .eao-inline-points-slider-container {
        max-width: 200px;
    }
}

/* Remove old duplicate styling - now handled by new structure above */

.eao-points-slider-inline {
    width: 120px;
    height: 6px;
    background: #ddd;
    border-radius: 3px;
    outline: none;
    cursor: pointer;
}

.eao-points-slider-inline::-webkit-slider-thumb {
    appearance: none;
    width: 20px;
    height: 20px;
    background: #0073aa;
    border-radius: 50%;
    cursor: pointer;
    transition: background-color 0.2s;
}

.eao-points-slider-inline::-webkit-slider-thumb:hover {
    background: #005a87;
}

.eao-points-slider-inline::-moz-range-thumb {
    width: 20px;
    height: 20px;
    background: #0073aa;
    border-radius: 50%;
    cursor: pointer;
    border: none;
    transition: background-color 0.2s;
}

.eao-points-slider-inline::-moz-range-thumb:hover {
    background: #005a87;
}

.eao-points-input-inline {
    width: 60px;
    padding: 2px 6px;
    border: 1px solid #ddd;
    border-radius: 3px;
    text-align: center;
    font-size: 12px;
    line-height: 1.4;
}

.eao-points-input-inline:focus {
    outline: none;
    border-color: #0073aa;
    box-shadow: 0 0 0 1px #0073aa;
}

.eao-points-slider-container {
    display: flex;
    align-items: center;
    gap: 8px;
}

.eao-points-slider-min, .eao-points-slider-max {
    font-size: 11px;
    color: #666;
    min-width: 15px;
    text-align: center;
}

/* YITH Points Earning Section Styling */
.eao-yith-earning-section {
    margin-top: 20px;
}

.eao-points-earning-container {
    padding: 0;
}

.eao-earning-summary {
    font-size: 14px;
    line-height: 1.5;
    margin-bottom: 8px;
}

.eao-earning-points {
    color: #0073aa;
    font-size: 16px;
}

.eao-earning-text {
    color: #333;
}

.eao-earning-guest-notice {
    padding: 10px;
    background: #f1f1f1;
    border-radius: 4px;
    text-align: center;
}

.eao-points-breakdown {
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    background: #fafafa;
}

.eao-points-breakdown summary {
    padding: 8px 12px;
    background: #f0f0f0;
    border-bottom: 1px solid #e0e0e0;
    margin: 0;
    font-weight: 500;
    user-select: none;
}

.eao-points-breakdown summary:hover {
    background: #e8e8e8;
}

.eao-points-breakdown[open] summary {
    border-bottom: 1px solid #e0e0e0;
}

.eao-breakdown-content {
    max-height: 300px;
    overflow-y: auto;
}

.eao-breakdown-item:last-child {
    border-bottom: none !important;
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
}

/* PHASE 2: Inconsistency Warning Styles */
.eao-inconsistency-warning {
    background-color: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 4px;
    padding: 8px 10px;
    margin: 8px 0;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9em;
}

.eao-warning-icon {
    color: #ff6b35;
    font-size: 1.1em;
    flex-shrink: 0;
}

.eao-warning-text {
    color: #856404;
    flex-grow: 1;
    line-height: 1.3;
}

.eao-fix-inconsistency-btn {
    background-color: #007cba;
    color: white;
    border: none;
    border-radius: 3px;
    padding: 6px 10px;
    font-size: 0.8em;
    cursor: pointer;
    flex-shrink: 0;
    transition: background-color 0.2s;
    white-space: nowrap;
}

.eao-fix-inconsistency-btn:hover {
    background-color: #005a87;
}

.eao-fix-inconsistency-btn:focus {
    outline: 2px solid #005a87;
    outline-offset: 1px;
}

/* Tabs header cell */
.eao-header-tabs { width: 240px; text-align: left; flex-shrink: 0; }

/* Item tabs container */
.eao-item-tabs {
    width: 220px; flex: 0 0 220px; box-sizing: border-box;
}
.eao-item-tabs-nav {
    display: inline-flex; border: 1px solid #e0e0e0; border-radius: 6px; overflow: hidden; background: #fff;
}
.eao-item-tabs-nav .eao-tab-btn { border: none; background: transparent; padding: 6px 10px; cursor: pointer; color: #3858e9; }
.eao-item-tabs-nav .eao-tab-btn.is-active { background: #f0f0ff; color: #1e1e1e; }
.eao-item-tab-panel { display: none; margin-top: 8px; }
.eao-item-tab-panel.is-active { display: block; }

/* Keep shipment cells compact inside the shipments tab */
.eao-item-tab-panel[data-tab-panel="shipments"] .eao-item-shipment { display: inline-block; width: 60px; text-align: center; }

@media (max-width: 1200px) {
  .eao-header-tabs, .eao-item-tabs { width: 200px; }
}
@media (max-width: 1024px) {
  .eao-header-tabs, .eao-item-tabs { width: 170px; }
}

/* Hide legacy pricing cells when tabbed layout is used (affects only direct children) */
.eao-product-editor-item > .eao-item-points,
.eao-product-editor-item > .eao-item-cost,
.eao-product-editor-item > .eao-item-price,
.eao-product-editor-item > .eao-item-exclude-discount,
.eao-product-editor-item > .eao-item-discount,
.eao-product-editor-item > .eao-item-discounted-price { display: none !important; }

/* Table-level tabs */
.eao-table-tabs { display: flex; justify-content: flex-start; }
.eao-table-tabs-nav { display: inline-flex; border: 1px solid #e0e0e0; border-radius: 6px; overflow: hidden; background: #fff; }
.eao-table-tab { border: none !important; box-shadow: none !important; background: transparent; padding: 6px 12px; cursor: pointer; color: #3858e9; }
.eao-table-tab.is-active { background: #f0f0ff; color: #1e1e1e; }

/* Let products area expand */
#eao-order-items-display-edit-section { width: 100%; }
#eao-current-order-items-list { width: 100%; }

/* Global view toggles */
#eao-current-order-items-list:not(.eao-view-shipments) .eao-item-tab-panel[data-tab-panel="pricing"] { display: block; }
#eao-current-order-items-list:not(.eao-view-shipments) .eao-item-tab-panel[data-tab-panel="shipments"] { display: none; }
#eao-current-order-items-list.eao-view-shipments .eao-item-tab-panel[data-tab-panel="pricing"] { display: none; }
#eao-current-order-items-list.eao-view-shipments .eao-item-tab-panel[data-tab-panel="shipments"] { display: block; }

/* Remove button: icon only, no background/frame */
.tabulator .eao-item-actions .button.button-link-delete,
.tabulator .eao-item-actions .button.button-link-undo,
.eao-product-editor-item .eao-item-actions .button.button-link-delete,
.eao-product-editor-item .eao-item-actions .button.button-link-undo {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
    padding: 0 4px !important;
}
.tabulator .eao-item-actions .dashicons,
.eao-product-editor-item .eao-item-actions .dashicons { color: #6b7280; }
.tabulator .eao-item-actions .button:hover .dashicons,
.eao-product-editor-item .eao-item-actions .button:hover .dashicons { color: #d63638; }

/* Grid layout for product rows: [thumb][product][qty][tabs][total][actions] */
.eao-product-editor-headers,
.eao-product-editor-item { display: grid; grid-template-columns: 42px minmax(300px, 1fr) 80px 240px 110px 40px; column-gap: 8px; align-items: center; }

/* Header cells alignment */
.eao-product-editor-headers > div { font-weight: 600; }

/* Ensure cells align to grid */
.eao-item-thumb { justify-self: center; }
.eao-item-content { overflow: hidden; }
.eao-item-title { white-space: normal; word-break: break-word; }

/* Tabs area full width in its grid cell */
.eao-item-tabs, .eao-header-tabs { width: 100%; }

/* Default view is pricing */
#eao-current-order-items-list:not(.eao-view-shipments) .eao-item-tab-panel[data-tab-panel="pricing"] { display: block; }
#eao-current-order-items-list:not(.eao-view-shipments) .eao-item-tab-panel[data-tab-panel="shipments"] { display: none; }
#eao-current-order-items-list.eao-view-shipments .eao-item-tab-panel[data-tab-panel="pricing"] { display: none; }
#eao-current-order-items-list.eao-view-shipments .eao-item-tab-panel[data-tab-panel="shipments"] { display: block; }

/* Widen tabs column to give Pricing UI space */
.eao-product-editor-headers, .eao-product-editor-item { grid-template-columns: 42px minmax(360px, 1fr) 80px 320px 110px 40px; }

/* Wider Details column for tabs/panels */
.eao-product-editor-headers, .eao-product-editor-item { grid-template-columns: 42px minmax(420px, 1fr) 80px 380px 110px 40px; }

/* Shipments header labels inside header Details cell */
#eao-current-order-items-list.eao-view-shipments .eao-product-editor-headers .eao-header-tabs { display: grid; grid-template-columns: repeat(var(--eao-ship-col-count, 2), 1fr); gap: 6px; }
#eao-current-order-items-list.eao-view-shipments .eao-product-editor-headers .eao-header-tabs > span { text-align: center; font-weight: 600; color: #444; }

/* Shipments panel grid per row */
.eao-item-tab-panel[data-tab-panel="shipments"] { display: grid; grid-template-columns: repeat(var(--eao-ship-col-count, 2), 1fr); gap: 6px; align-items: center; }
.eao-item-tab-panel[data-tab-panel="shipments"] .eao-item-shipment { text-align: center; }

/* Pricing panel normal flow with breathing room */
.eao-item-tab-panel[data-tab-panel="pricing"] { display: block; }

/* View toggles */
#eao-current-order-items-list.eao-view-pricing .eao-item-tab-panel[data-tab-panel="pricing"] { display: block; }
#eao-current-order-items-list.eao-view-pricing .eao-item-tab-panel[data-tab-panel="shipments"] { display: none; }
#eao-current-order-items-list.eao-view-shipments .eao-item-tab-panel[data-tab-panel="pricing"] { display: none; }
#eao-current-order-items-list.eao-view-shipments .eao-item-tab-panel[data-tab-panel="shipments"] { display: grid; }

/* Tabulator-specific final overrides: remove any cell-level backgrounds */
#eao-current-order-items-list .tabulator .eao-product-editor-item,
#eao-current-order-items-list .tabulator .eao-product-editor-item:nth-child(odd),
#eao-current-order-items-list .tabulator .eao-product-editor-item:nth-child(even),
#eao-current-order-items-list .tabulator .eao-product-editor-item > *,
#eao-current-order-items-list .tabulator .eao-input-align-wrapper,
#eao-current-order-items-list .tabulator .eao-discount-controls { 
	background: transparent !important; 
	background-color: transparent !important; 
	border-bottom: none !important; 
}

/* FINAL OVERRIDES: normalize Tabulator grid backgrounds (no zebra, no cell backgrounds) */
#eao-current-order-items-list .tabulator .tabulator-table,
#eao-current-order-items-list .tabulator .tabulator-row,
#eao-current-order-items-list .tabulator .tabulator-row-odd,
#eao-current-order-items-list .tabulator .tabulator-row-even,
#eao-current-order-items-list .tabulator .tabulator-cell,
#eao-current-order-items-list .tabulator .tabulator-cell:hover,
#eao-current-order-items-list .tabulator .tabulator-row:hover { background: transparent !important; background-color: transparent !important; }
#eao-current-order-items-list .tabulator .eao-product-editor-item:nth-child(odd),
#eao-current-order-items-list .tabulator .eao-product-editor-item:nth-child(even) { background: transparent !important; }

/* FINAL OVERRIDES (container-corrected): when the list element IS the Tabulator root */
#eao-current-order-items-list.tabulator .tabulator-table,
#eao-current-order-items-list.tabulator .tabulator-row,
#eao-current-order-items-list.tabulator .tabulator-row-odd,
#eao-current-order-items-list.tabulator .tabulator-row-even,
#eao-current-order-items-list.tabulator .tabulator-cell,
#eao-current-order-items-list.tabulator .tabulator-cell:hover,
#eao-current-order-items-list.tabulator .tabulator-row:hover { background: transparent !important; background-color: transparent !important; }
#eao-current-order-items-list.tabulator .eao-product-editor-item,
#eao-current-order-items-list.tabulator .eao-product-editor-item:nth-child(odd),
#eao-current-order-items-list.tabulator .eao-product-editor-item:nth-child(even),
#eao-current-order-items-list.tabulator .eao-product-editor-item > *,
#eao-current-order-items-list.tabulator .eao-input-align-wrapper,
#eao-current-order-items-list.tabulator .eao-discount-controls { background: transparent !important; background-color: transparent !important; }
#eao-current-order-items-list.tabulator .eao-item-actions .button,
#eao-current-order-items-list.tabulator .eao-item-actions .button:focus,
#eao-current-order-items-list.tabulator .eao-item-actions .button:hover { background: transparent !important; border: none !important; box-shadow: none !important; }

/* Lighten table background */
#eao-current-order-items-list.tabulator,
#eao-current-order-items-list.tabulator .tabulator-tableholder,
#eao-current-order-items-list.tabulator .tabulator-table { background: #ffffff !important; }

/* Restore staging and pending deletion backgrounds (after neutralizers) */
#eao-current-order-items-list.tabulator .tabulator-row.eao-staged {
	background-color: #effcf3 !important; /* very light green */
	box-shadow: inset 3px 0 0 0 #22c55e !important; /* green accent */
}
#eao-current-order-items-list.tabulator .tabulator-row.eao-pending-deletion {
	background-color: #fff1f2 !important; /* very light red */
	box-shadow: inset 3px 0 0 0 #ef4444 !important; /* red accent */
	opacity: 0.92;
}
#eao-current-order-items-list.tabulator .tabulator-row.eao-pending-deletion input,
#eao-current-order-items-list.tabulator .tabulator-row.eao-pending-deletion select,
#eao-current-order-items-list.tabulator .tabulator-row.eao-pending-deletion button { pointer-events: none; }
#eao-current-order-items-list.tabulator .tabulator-row.eao-pending-deletion .eao-item-actions .eao-undo-delete-button { pointer-events: auto; }

/* Center content in narrowed numeric columns */
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="cost"],
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="price"],
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="discount"],
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="disc_price"],
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="total"],
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="actions"] {
	text-align: center !important;
}
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="qty"] { text-align: center !important; }
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="qty"] .eao-input-align-wrapper { justify-content: center; margin-bottom: 0 !important; width: 100%; }
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="qty"] .eao-quantity-input { text-align: center !important; margin-left: auto; margin-right: auto; }
#eao-current-order-items-list.tabulator .eao-discount-controls { justify-content: center; }
#eao-current-order-items-list.tabulator .eao-input-align-wrapper-right { justify-content: center; }
#eao-current-order-items-list.tabulator .eao-item-discounted-price-input { max-width: 60px; }
#eao-current-order-items-list.tabulator .eao-item-discount-percent-input { max-width: 46px; }
#eao-current-order-items-list.tabulator .eao-item-actions { text-align: center; }

/* Center trash icon precisely (non-flex to avoid layout shifts) */
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="actions"] {
	text-align: center !important;
	padding: 0 !important;
}
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="actions"] .eao-item-actions { display: inline-block; }
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="actions"] .eao-item-actions .button {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 24px;
	height: 24px;
	margin: 0;
}

/* Center Points column content */
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="points"] { text-align: center !important; }
#eao-current-order-items-list.tabulator .eao-item-points { text-align: center; }
#eao-current-order-items-list.tabulator .eao-item-points .eao-points-display { display: inline-block; min-width: 18px; }
#eao-current-order-items-list.tabulator .eao-item-points .eao-points-details-btn { margin-top: 2px; }

/* Points info icon button */
#eao-current-order-items-list.tabulator .eao-item-points .eao-points-details-btn.eao-icon-button-info {
	background: transparent !important;
	border: none !important;
	box-shadow: none !important;
	padding: 0;
	width: 24px; height: 24px;
	display: inline-flex; align-items: center; justify-content: center;
	cursor: pointer;
}
#eao-current-order-items-list.tabulator .eao-item-points .eao-points-details-btn.eao-icon-button-info .dashicons { color: #6b7280; }
#eao-current-order-items-list.tabulator .eao-item-points .eao-points-details-btn.eao-icon-button-info:hover .dashicons { color: #2271b1; }

/* Stronger row separators */
#eao-current-order-items-list.tabulator .tabulator-row { border-bottom: 1px solid #e5e7eb !important; }

/* Points column perfect centering (safe for Tabulator layout) */
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="points"] {
	padding: 0 6px !important;
	text-align: center !important;
}
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="points"] > .eao-item-points {
	display: inline-flex; align-items: center; justify-content: center; gap: 4px;
}
#eao-current-order-items-list.tabulator .eao-item-points .eao-points-display { display: inline-block; min-width: 18px; text-align: center; }

/* Points header fixed width */
#eao-current-order-items-list .eao-header-points,
#eao-current-order-items-list.tabulator .eao-header-points { width: 50px !important; }

/* Points header width */
#eao-current-order-items-list.tabulator .eao-header-points, .eao-header-points { width: 50px !important; text-align: center; }

/* Force Points content wrapper width to match column */
#eao-current-order-items-list.tabulator .eao-item-points { width: 50px !important; padding-left: 0 !important; padding-right: 0 !important; }

/* Remove padding for points cell and wrapper so icon fits */
#eao-current-order-items-list.tabulator .tabulator-cell[tabulator-field="points"] { padding: 0 !important; }
#eao-current-order-items-list.tabulator .eao-item-points { padding: 0 !important; }